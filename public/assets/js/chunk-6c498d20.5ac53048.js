(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c498d20"],{"234d":function(e,t,o){"use strict";var r=o("f529"),a=o.n(r);a.a},"4a85":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"report"}},[o("div",{staticClass:"container"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col no-padding"},[o("h1",[e._v(e._s(e.section_title))])])]),o("div",{staticClass:"row report_box d-flex align-items-start"},[o("div",{staticClass:"list_btn"},[o("div",{staticClass:"list_btn_first-line"},[o("router-link",{staticClass:"btn btn-default",attrs:{to:"/externalReportsByCompanies"}},[e._v(e._s(e.archive))]),o("router-link",{staticClass:"btn btn-green",attrs:{to:"/externalReportsByCompanies/create"}},[o("span",[e._v("+")]),e._v(e._s(e.send))])],1),o("div",{staticClass:"list_btn_second-line"},[o("div",{staticClass:"dropdown"},[o("button",{staticClass:"btn btn-dropdown"},[e._v(e._s(e.action)+" "),o("img",{staticClass:"drop-i",attrs:{src:"/img/dropdown-i.png",alt:""}})]),o("transition",{attrs:{name:"fade"}},[e.listAction?o("div",{staticClass:"dropdown_box"},[o("ul",[o("li",[o("a",{staticClass:"dropwond_link",attrs:{href:"#"}},[e._v("1")])]),o("li",[o("a",{staticClass:"dropwond_link",attrs:{href:"#"}},[e._v("2")])]),o("li",[o("a",{staticClass:"dropwond_link",attrs:{href:"#"}},[e._v("3")])])])]):e._e()])],1)])])]),o("form",{staticClass:"row create_report_box d-flex align-items-start",attrs:{method:"post"},on:{submit:function(t){return t.preventDefault(),e.createReport(t)}}},[o("div",{staticClass:"left-side"},e._l(e.fields,function(t,r){return r<3?o("div",{class:{"col-md-8":void 0===t.long_i,"col-md-16":!0===t.long_i}},[o("div",{staticClass:"field-box"},["title"!=t.type?o("label",[e._v(e._s(t.title))]):e._e(),"checkbox"===t.type&&"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model,type:"checkbox"},domProps:{checked:Array.isArray(e.modelObj[t.model])?e._i(e.modelObj[t.model],null)>-1:e.modelObj[t.model]},on:{change:[function(o){var r=e.modelObj[t.model],a=o.target,l=!!a.checked;if(Array.isArray(r)){var n=null,i=e._i(r,n);a.checked?i<0&&e.$set(e.modelObj,t.model,r.concat([n])):i>-1&&e.$set(e.modelObj,t.model,r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.modelObj,t.model,l)},e.addToMemory]}}):"radio"===t.type&&"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model,type:"radio"},domProps:{checked:e._q(e.modelObj[t.model],null)},on:{change:[function(o){return e.$set(e.modelObj,t.model,null)},e.addToMemory]}}):"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model,type:t.type},domProps:{value:e.modelObj[t.model]},on:{change:e.addToMemory,input:function(o){o.target.composing||e.$set(e.modelObj,t.model,o.target.value)}}}):e._e(),"TypeReport"==t.model?o("select",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model},on:{change:[function(o){var r=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.modelObj,t.model,o.target.multiple?r:r[0])},e.addToMemory]}},[e._l(t.options,function(t){return"ru"==e.$store.getters.getLang?o("option",{domProps:{value:t.name_report}},[e._v(e._s(t.ru))]):e._e()}),e._l(t.options,function(t){return"en"==e.$store.getters.getLang?o("option",{domProps:{value:t.name_report}},[e._v(e._s(t.en))]):e._e()})],2):e._e(),"CompanyReport"==t.model?o("select",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{value:"8",name:t.model},on:{change:[function(o){var r=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.modelObj,t.model,o.target.multiple?r:r[0])},e.addToMemory]}},[e._l(t.options,function(t){return o("option",{domProps:{value:t.id}},[e._v(e._s(t.company_full_name))])}),e._v(" // todo вернуть\n                            ")],2):e._e(),"label"==t.type?o("div",{staticClass:"contractor_parag"},[o("p",[e._v(e._s(e.modelObj[t.model]))])]):e._e(),"title"==t.type?o("div",{staticClass:"report_parag"},[o("p",[e._v(e._s(t.title))])]):e._e(),"date"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{type:"date"},domProps:{value:e.modelObj[t.model]},on:{change:e.addToMemory,input:function(o){o.target.composing||e.$set(e.modelObj,t.model,o.target.value)}}}):e._e()])]):e._e()}),0),o("div",{staticClass:"right-side"},e._l(e.fields,function(t,r){return r>=3?o("div",{class:{"col-md-4":void 0===t.long_i,"col-md-8":!0===t.long_i}},[o("div",{staticClass:"field-box"},["title"!=t.type?o("label",[e._v(e._s(t.title))]):e._e(),"checkbox"===t.type&&"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model,type:"checkbox"},domProps:{checked:Array.isArray(e.modelObj[t.model])?e._i(e.modelObj[t.model],null)>-1:e.modelObj[t.model]},on:{change:[function(o){var r=e.modelObj[t.model],a=o.target,l=!!a.checked;if(Array.isArray(r)){var n=null,i=e._i(r,n);a.checked?i<0&&e.$set(e.modelObj,t.model,r.concat([n])):i>-1&&e.$set(e.modelObj,t.model,r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.modelObj,t.model,l)},e.addToMemory]}}):"radio"===t.type&&"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model,type:"radio"},domProps:{checked:e._q(e.modelObj[t.model],null)},on:{change:[function(o){return e.$set(e.modelObj,t.model,null)},e.addToMemory]}}):"text"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model,type:t.type},domProps:{value:e.modelObj[t.model]},on:{change:e.addToMemory,input:function(o){o.target.composing||e.$set(e.modelObj,t.model,o.target.value)}}}):e._e(),"LanguageReport"==t.model?o("select",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model},on:{change:[function(o){var r=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.modelObj,t.model,o.target.multiple?r:r[0])},e.addToMemory]}},e._l(t.options,function(t){return o("option",{domProps:{value:t.lang}},[e._v(e._s(t.caption))])}),0):e._e(),"formatReport"==t.model?o("select",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model},on:{change:[function(o){var r=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.modelObj,t.model,o.target.multiple?r:r[0])},e.addToMemory]}},e._l(t.options,function(t){return o("option",{domProps:{value:t.value}},[e._v(e._s(t.caption))])}),0):e._e(),"TypeReport"==t.model?o("select",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model},on:{change:[function(o){var r=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.modelObj,t.model,o.target.multiple?r:r[0])},e.addToMemory]}},e._l(t.options,function(t){return o("option",{domProps:{value:t.name_report}},[e._v(e._s(t.name_report))])}),0):e._e(),"CompanyReport"==t.model?o("select",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{name:t.model},on:{change:[function(o){var r=Array.prototype.filter.call(o.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.$set(e.modelObj,t.model,o.target.multiple?r:r[0])},e.addToMemory]}},e._l(t.options,function(t){return o("option",{domProps:{value:t.id}},[e._v(e._s(t.company_full_name))])}),0):e._e(),"label"==t.type?o("div",{staticClass:"contractor_parag"},[o("p",[e._v(e._s(e.modelObj[t.model]))])]):e._e(),"title"==t.type?o("div",{staticClass:"report_parag"},[o("p",[e._v(e._s(t.title))])]):e._e(),"date"==t.type?o("input",{directives:[{name:"model",rawName:"v-model",value:e.modelObj[t.model],expression:"modelObj[item.model]"}],attrs:{type:"date",name:t.model},domProps:{value:e.modelObj[t.model]},on:{change:e.addToMemory,input:function(o){o.target.composing||e.$set(e.modelObj,t.model,o.target.value)}}}):e._e()])]):e._e()}),0),o("div",{staticClass:"col d-flex justify-content-end page_buttons_bottom"},[o("button",{staticClass:"btn btn-green",attrs:{name:"ok"}},[e._v(e._s(e.send))]),o("a",{staticClass:"btn btn-grey",attrs:{name:"back"},on:{click:function(t){return e.$bRouter.go(-1)}}},[e._v(e._s(e.back))])])])])])},a=[],l=(o("7f7f"),o("ac6a"),o("5df3"),o("1c4c"),o("bc3a"),{data:function(){return{listAction:"",reportNames:[],reportCompanys:[],format:[],send:"",archive:"",section_title:"",back:"",counter:0,action:"",date:[],lang:[],modelObj:{},fields:[],error:!1,lng:this.$store.getters.getLang}},computed:{},watch:{},methods:{checkMemory:function(){var e=this;if(localStorage.getItem("createReport_0")){var t=Array.from(document.querySelectorAll(".field-box label"));t.forEach(function(t,o){var r=localStorage.getItem("createReport_"+o),a=t.nextSibling.nextElementSibling.name;e.modelObj[a]=r})}else this.addToMemory()},addToMemory:function(){Array.prototype.forEach.call(document.querySelectorAll(".field-box label"),function(e,t){var o=e.nextSibling.nextElementSibling.value;e.nextSibling.nextElementSibling.name;localStorage.setItem("createReport_"+t,o)})},createReport:function(){var e=this;this.modelObj["CompanyReport"]||("ru"==this.$store.getters.getLang&&this.$toast.error('Не выбрана "Организация"',"",{position:"topRight"}),"en"==this.$store.getters.getLang&&this.$toast.error('Not selected "Company"',"",{position:"topRight"}),this.error=!0),this.modelObj["TypeReport"]||("ru"==this.$store.getters.getLang&&this.$toast.error('Не выбрано "Вид Отчета"',"",{position:"topRight"}),"en"==this.$store.getters.getLang&&this.$toast.error('Not selected "Report Type"',"",{position:"topRight"}),this.error=!0),this.error||("ru"==this.$store.getters.getLang&&this.$toast.info("Формирование отчета","",{position:"topRight"}),"en"==this.$store.getters.getLang&&this.$toast.info("Report generation","",{position:"topRight"}),this.$http.post("/admin/company/report/create",{TypeReport:this.modelObj["TypeReport"],CompanyReport:this.modelObj["CompanyReport"],StartDateReport:this.modelObj["StartDateReport"],EndDateReport:this.modelObj["EndDateReport"],LanguageReport:this.modelObj["LanguageReport"],formatReport:this.modelObj["formatReport"]}).then(function(t){"ru"==e.$store.getters.getLang&&e.$toast.success("Отчет сформирован","",{position:"topRight"}),"en"==e.$store.getters.getLang&&e.$toast.success("The report is formed","",{position:"topRight"}),e.$bRouter.push({path:"/externalReportsByCompanies"})}))}},updated:function(){0==this.counter&&(this.checkMemory(),this.counter=1)},mounted:function(){var e=this;this.$http.post("/admin/company/report",null).then(function(t){e.modelObj={StartDateReport:"",EndDateReport:"",LanguageReport:"",formatReport:"",TypeReport:"",CompanyReport:""},t.data.date.startYear?e.modelObj["StartDateReport"]=t.data.date.startYear:e.modelObj["StartDateReport"]="",t.data.date.now?e.modelObj["EndDateReport"]=t.data.date.now:e.modelObj["EndDateReport"]="",t.data.lang[0].lang?e.modelObj["LanguageReport"]=t.data.lang[0].lang:e.modelObj["LanguageReport"]="",t.data.format[0].value?e.modelObj["formatReport"]=t.data.format[0].value:e.modelObj["formatReport"]="",t.data.report_name[0]?e.modelObj["TypeReport"]=t.data.report_name[0].name_report:e.modelObj["TypeReport"]="",t.data.accessCompanyAllArr[0]?e.modelObj["CompanyReport"]=t.data.accessCompanyAllArr[0][0]:e.modelObj["CompanyReport"]="","ru"==e.$store.getters.getLang&&(e.send="Создать новый отчет",e.archive="Список отчетов",e.action="Действия",e.add="Добавить",e.back="Назад",e.section_title="Формирование отчета",e.fields=[{title:"Вид отчета и организации",type:"title",long_i:!0},{title:"Выберите вид отчета",model:"TypeReport",options:t.data.report_name,type:"select",long_i:!0},{title:"Выберите организацию",model:"CompanyReport",options:t.data.accessCompanyAllArr,type:"select",long_i:!0},{title:"Период отчета",type:"title"},{title:"Параметры",type:"title"},{title:"Начало периода",model:"StartDateReport",type:"date"},{title:"Выберите язык",model:"LanguageReport",options:t.data.lang,type:"select"},{title:"Конец периода",model:"EndDateReport",type:"date"},{title:"Выберите формат",model:"formatReport",type:"select",options:t.data.format}]),"en"==e.$store.getters.getLang&&(e.send="Create a new report",e.archive="Reports List",e.action="Actions",e.add="Add",e.back="Back",e.section_title="Report generation",e.fields=[{title:"Report type and Company",type:"title",long_i:!0},{title:"Select report type",model:"TypeReport",options:t.data.report_name,type:"select",long_i:!0},{title:"Select Company",model:"CompanyReport",options:t.data.report_companys,type:"select",long_i:!0},{title:"Report period",type:"title"},{title:"Options",type:"title"},{title:"Beginning of period",model:"StartDateReport",type:"date"},{title:"Choose language",model:"LanguageReport",options:t.data.lang,type:"select"},{title:"End of the period",model:"EndDateReport",type:"date"},{title:"Choose format",model:"formatReport",type:"select",options:t.data.format}])})},components:{}}),n=l,i=(o("234d"),o("2877")),d=Object(i["a"])(n,r,a,!1,null,null,null);t["default"]=d.exports},d1ba:function(e,t,o){t=e.exports=o("2350")(!1),t.push([e.i,":root{--accent:#e1002d;--bg-color:#fff;--base-color:#202a3d;--darkAccent:#a2001e;--tableHead:#788699}#report{padding:0 1.5rem}#report .btn-green{padding:1rem 3rem}#report .page_buttons_bottom{-ms-flex-wrap:wrap;flex-wrap:wrap}@media (max-width:767px){#report .page_buttons_bottom .btn{width:100%;margin-right:0;margin-bottom:.8rem}}#report .left-side,#report .right-side{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;min-width:50rem;width:100%;max-width:50%}@media (max-width:1249px){#report .left-side,#report .right-side{max-width:100%}}#report .left-side .col-md-8,#report .right-side .col-md-8{max-width:100%;min-width:100%}#report .left-side .col-md-4,#report .right-side .col-md-4{max-width:50%;min-width:50%}#report .list_btn_first-line{margin-bottom:2rem}#report .list_btn_first-line .btn-green{padding:1rem 3rem}#report .list_btn_first-line .btn-green span{margin-right:1rem}#report .create_report-block{border-right:1px solid #e4e7ea}#report .create_report_box{background:#fff;padding:5rem 0;margin-left:-1.5rem;margin-right:-1.5rem;margin-top:2.5rem;border-radius:4px;border:1px solid #e6eaee}#report .create_report_box .btn-grey{margin-right:0}#report .create_report_box .field-box{margin-bottom:3rem}#report .create_report_box .field-box label{color:#202a3d;font-size:1.4rem;display:-ms-flexbox;display:-webkit-box;display:flex;font-weight:600}#report .create_report_box .field-box input{background-color:#fff;padding-left:2rem;font-size:1.5rem;padding-right:1.5rem}#report .create_report_box .field-box input,#report .create_report_box .field-box select{width:100%;height:3.5rem;border-radius:4px;border:1px solid #ced0da;margin-top:1.3rem;background-image:-webkit-gradient(linear,left bottom,left top,from(#f1f3f7),to(#fff));background-image:linear-gradient(0deg,#f1f3f7 0,#fff)}#report .create_report_box .field-box select{padding-left:1.5rem}#report .create_report_box .field-box .report_parag p{color:var(--accent);font-size:1.8rem;margin-bottom:3rem}@media (max-width:767px){#report .left-side,#report .right-side{min-width:100%}#report .container{padding:0 1.5rem}}",""])},f529:function(e,t,o){var r=o("d1ba");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=o("499e").default;a("79d02ad9",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-6c498d20.5ac53048.js.map