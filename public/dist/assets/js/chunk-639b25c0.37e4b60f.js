(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-639b25c0"],{"143e":function(e,t,a){"use strict";var i=a("ad9f"),n=a.n(i);n.a},"42f0":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,':root{--accent:#e1002d;--bg-color:#fff;--base-color:#202a3d;--darkAccent:#a2001e;--tableHead:#788699}.fade-enter-active,.fade-leave-active{-webkit-transition:opacity .5s;transition:opacity .5s}.fade-enter,.fade-leave-to{opacity:0}.atom-spinner{display:block;margin:auto;position:absolute;left:50%;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.list_btn{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.attached-files{margin-top:2rem}.attached-files .dependent .dependent-title{color:#202a3d;font-size:1.5rem;font-weight:600;margin-bottom:1rem;display:block}.attached-files .dependent .dependent-label{border-radius:4px;border:1px solid #ced0da;background-color:#fff;background-image:-webkit-gradient(linear,left bottom,left top,from(#f1f3f7),to(#fff));background-image:linear-gradient(0deg,#f1f3f7 0,#fff);margin-left:0;color:#7c8ca5;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-shadow:none;box-shadow:none;text-align:left;position:relative;padding:1rem 2.4rem;-webkit-transition:all .25s;transition:all .25s;z-index:99;display:-webkit-box;display:-ms-flexbox;display:flex}.attached-files .dependent .dependent-label p{font-size:1.8rem;line-height:1.42857143}.attached-files .faq{margin-bottom:1.8181818182rem}.attached-files .faq-main{margin-top:3rem}.attached-files .faq-dropdow{width:100%!important}.attached-files .faq-el{border-color:#e2e2e2;border-style:solid;border-width:1px;border-radius:3px;margin-top:-1px;cursor:pointer}.attached-files .faq-el-article .faq-text{padding-left:4.5454545455rem}.attached-files .faq-el-section{position:relative;background-color:#efefef}.attached-files .faq-el-section:before{position:absolute;left:0;top:0;bottom:0;margin:auto;content:"";border:3px solid var(--accent);width:0;height:100%;border-radius:3px}.attached-files .faq-icon{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:3.1818181818rem;height:3.1818181818rem;background-color:var(--accent);position:relative;border-radius:3px;overflow:hidden;margin-right:1.1818181818rem;color:#fff;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:2rem;font-weight:700;cursor:pointer}.attached-files .faq-cont,.attached-files .faq-icon{display:-webkit-box;display:-ms-flexbox;display:flex}.attached-files .faq-check{width:6.3636363636rem;-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;border-right:1px solid #e2e2e2;border-radius:3px;padding:1.8181818182rem 2rem}.attached-files .faq-check .checkbox-custom{background-color:#fff}.attached-files .faq-text{-webkit-box-flex:1;-ms-flex:1 1 100%;flex:1 1 100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1rem 1.8181818182rem}.attached-files .faq-text p{-webkit-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;overflow:hidden;text-overflow:ellipsis;font-size:1.4545454545rem;font-family:Proxima Nova}.attached-files .faq-text .required:after{content:"*";position:absolute;font-size:2.2rem;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);color:var(--accent);margin-left:3px}.attached-files .faq-text input{display:none}.attached-files .faq-text .file-quantity{text-align:right;margin-right:2rem;color:#202a3d;font-size:1.5rem;font-weight:600;display:block}.attached-files .faq-menu{-webkit-box-flex:0;-ms-flex:0 0 auto;flex:0 0 auto;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:1.6363636364rem}.attached-files .faq-menu img.svg{display:inherit}.attached-files .faq-el.active>.attached-files .faq-cont>.attached-files .faq-check{border-bottom-right-radius:0}.attached-files .faq .checkbox,.attached-files .faq .checkbox-custom{margin:0}.attached-files .smenu{display:-webkit-box;display:-ms-flexbox;display:flex}.attached-files .smenu svg{display:inherit;width:100%;max-width:1.9090909091rem;height:1.9090909091rem}.attached-files .smenu svg path{fill:#e1002d!important;fill-rule:evenodd}.attached-files .smenu.active .smenu-btn svg path{fill:var(--accent)}.attached-files .smenu.active .smenu-btn:hover svg path{fill:#7c8ca5}.attached-files .smenu-btn{padding:0;background-color:transparent;margin:0;-webkit-box-shadow:none;box-shadow:none;border:none;min-width:.6363636364rem;margin-top:5px}.attached-files .smenu-list{display:-webkit-box;display:-ms-flexbox;display:flex;padding-right:1.0909090909rem;margin-right:1rem;height:100%!important}.attached-files .smenu-list li{height:2.7272727273rem;padding:0 1.2727272727rem}.attached-files .smenu-list li button{background:transparent;border:none}.attached-files .smenu-list li button svg path{fill:#e1002d!important;fill-rule:evenodd}',""])},"5bcb":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container attached-files"},[a("transition-group",{attrs:{name:"fade",mode:"in-out"}},[a("atom-spinner",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],key:"1",attrs:{"animation-duration":1e3,color:"var(--accent)"}}),e._v("\n        "+e._s(e.loading)+"\n        "),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],key:"2"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col",staticStyle:{display:"flex","align-items":"center"}},[a("h1",[e._v(e._s(e.form_parameters.form_title))])]),a("div",{staticClass:"col-md-4"},[e.dependent?a("div",{staticClass:"dependent"},[a("span",{staticClass:"dependent-title"},[e._v(e._s(e.dependent.title))]),"label"===e.dependent.type?a("div",{staticClass:"dependent-label"},[a("p",[e._v(e._s(e.dependent.options_data.options_field_value))])]):e._e()]):e._e()])]),a("div",{staticClass:"align-items-center margin-top-2"},[e.sets?[a("div",{staticClass:"list_btn"},[e.sets&&e.sets.faq_dropdown_actions?a("div",{staticClass:"list_btn_second-line"},[a("div",{staticClass:"dropdown",class:{active:e.listAction}},[a("button",{staticClass:"btn btn-dropdown"},[e._v("\n\n                                    "+e._s(e.translateList.Actions)+"\n                                    "),a("img",{staticClass:"drop-i",attrs:{src:"/img/dropdown-i.png",alt:""}})]),a("div",{staticClass:"dropdown_box"},[a("ul",e._l(e.sets.faq_dropdown_actions,function(t){return a("li",[a("button",{staticClass:"dropwond_link",on:{click:function(a){return e.deleteItem(t.code,t.link)}}},[e._v("\n                                                "+e._s(t.title)+"\n                                            ")])])}),0)])])]):e._e(),e._l(e.sets.faq_command_bar,function(t){return[a("button",{class:t.class,on:{click:function(a){return e.clickAction(t.code,t)}}},[e._v(" "+e._s(t.title))])]})],2)]:e._e()],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"faq-main"},e._l(e.main_data_models[e.form_parameters["form_base_data_model"]],function(t){return a("div",{staticClass:"faq"},[a("div",{staticClass:"faq-el faq-el-section",on:{click:function(t){return t.stopPropagation(),e.sectionClick(t)}}},[a("div",{staticClass:"faq-cont"},[a("div",{staticClass:"faq-text"},[e.sets.att_file_bar.find(function(e){return"add_att_file"===e.code})?a("label",{attrs:{for:t.att_doc_kind_name},on:{click:function(e){e.stopPropagation()}}},[a("span",{staticClass:"faq-icon"},[e._v("+")])]):e._e(),a("p",{class:{required:t.required_document_l}},[e._v(e._s(t.att_doc_kind_name))]),a("input",{directives:[{name:"validate",rawName:"v-validate",value:{size:t.size,ext:t.ext},expression:"{size:item.size, ext:item.ext}"}],attrs:{type:"file",name:t.att_doc_kind_name,id:t.att_doc_kind_name},on:{click:function(e){e.stopPropagation()},change:function(a){return e.fileUpload(a,t)}}}),a("p",{staticClass:"invalid"},[e._v(e._s(e.errors.first(t.att_doc_kind_name)))]),a("p",{staticClass:"file-quantity"},[e._v("Файлов: "+e._s(t.db_area_files.length-1))]),a("img",{staticClass:"drop-i",attrs:{src:"/img/dropdown-i.png",alt:""}})])])]),a("div",{staticClass:"faq-dropdow",staticStyle:{display:"none"},attrs:{id:"section_"+t.att_doc_kind_name}},[e._l(t.db_area_files,function(i){return i.id?[a("div",{staticClass:"faq-el faq-el-article"},[a("div",{staticClass:"faq-cont"},[a("div",{staticClass:"faq-text"},[a("p",[e._v(e._s(i.db_area_file_name))])]),a("div",{staticClass:"faq-menu"},[a("div",{staticClass:"smenu"},[a("ul",{staticClass:"smenu-list"},e._l(e.sets.att_file_bar,function(n){return"add_att_file"!==n.code?a("li",[a("button",{class:n.class,on:{click:function(a){return e.att_file_action(n,i,t.att_doc_kind_name)}}},[a("img",{staticClass:"svg",attrs:{src:n.img,alt:""}})])]):e._e()}),0)])])])])]:e._e()})],2)])}),0)])],1)],1)},n=[],s=(a("b54a"),a("28a5"),a("7f7f"),a("96cf"),a("3b8d")),o=a("4583"),r=(a("2f62"),a("ff35")),l=a.n(r),d=a("1157"),c=a.n(d),f=a("56d7"),m=a("9949"),p={mixins:[m["a"]],data:function(){return{loading:!0,listAction:!1,paramCard:this.$store.getters.getParamCard,main_data_models:null,form_parameters:null,dependent:null,sets:null,file_data_model:"DbAreaFiles",last_chosen:null}},methods:{sectionClick:function(e){var t=this.ftoggle(c()(e.target).parents(".faq-el-section").next());t?c()(e.target).parents(".faq").addClass("active"):c()(e.target).parents(".faq").removeClass("active")},ftoggle:function(e,t){var a="none"==c()(e).css("display");return a?c()(e).show(t||300):c()(e).hide(t||300),a},fillComponent:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,this.paramCard.id=this.step_l?this.row_id_fe_route_step_object:this.$bRoute.params[this.$bRoute.meta.id_field],this.controller_alias&&(this.paramCard.dependent={dependent_data_model:this.controller_alias,id:this.$bRoute.params[this.$bRoute.matched[0].meta.id_field]}),this.$bRoute.meta.prev_controller_alias&&(this.paramCard.dependent={controller_alias:this.$bRoute.meta.prev_controller_alias,id:this.$bRoute.params[this.$bRoute.meta.prev_id_field]}),e.next=7,this.$http.post(t,this.paramCard);case 7:a=e.sent,this.main_data_models=a.data.main_data_models,this.form_parameters=a.data.form_parameters,this.dependent=a.data.dependent,this.sets=a.data.sets,this.loading=!1,this.last_chosen&&(i=document.getElementById(this.last_chosen),i&&c()(i).show(300)),e.next=20;break;case 16:e.prev=16,e.t0=e["catch"](0),this.$toast.error(e.t0.response.data.message,""+e.t0.response.status,{position:"topRight"}),this.loading=!1;case 20:case"end":return e.stop()}},e,this,[[0,16]])}));function t(t){return e.apply(this,arguments)}return t}(),fileUpload:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t,a){var i,n,o,r,l,d=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:i=new FileReader,t.target.files[0]&&(this.last_chosen="section_"+a.att_doc_kind_name,n=this.file_data_model,o=t.target.files[0].name,o=o.slice(0,o.lastIndexOf(".")),r={},r[n]=[JSON.parse(JSON.stringify(a["db_area_files"][0]))],r[n][0]["db_area_file_name"]=o,l={id:null,storedFile:{name:o,extension:t.target.files[0].name.slice(t.target.files[0].name.lastIndexOf(".")+1),size:t.target.files[0].size}},i.readAsDataURL(t.target.files[0]),this.$validator.validate(a.att_doc_type_name).then(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t&&(i.onload=function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=t.target.result.split(","),l["storedFile"]["mime"]=i[1],l["storedFile"]["mime_type"]=i[0],r[n][0]["stored_file"]=l,e.prev=4,e.next=7,d.$http.post("/admin/dbArea/file/write",{main_data_models:r,form_parameters:{form_base_data_model:n}});case 7:return e.sent,e.next=10,d.fillComponent(d.$bRoute.meta.route);case 10:document.getElementById(a.att_doc_kind_name).value="",e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](4),d.$toast.error(e.t0.response.data.message,""+e.t0.response.status,{position:"topRight"});case 16:case"end":return e.stop()}},e,null,[[4,13]])}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));function t(t,a){return e.apply(this,arguments)}return t}(),att_file_action:function(e,t,a){var i=this,n=e.code,s=e.link,o={};"delete_att_file"===n?(this.last_chosen="section_"+a,o["main_model"]=this.file_data_model,o["items"]=t.id):(o["id"]=t.id,o["main_model"]=this.file_data_model),this.$http.post(s,o).then(function(e){"download_att_file"===n&&i.saveFile(e.data),"delete_att_file"===n&&i.fillComponent(i.$bRoute.meta.route)}).catch(function(e){i.$toast.error(e.response.data.message,""+e.response.status,{position:"topRight"})})}},props:["row_id_fe_route_step_object","step_l","controller_alias"],components:{AtomSpinner:o["a"],bFormSelect:l.a},mounted:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.imgtosvg(),this.fillComponent(this.$bRoute.meta.route),f["EventBus"].$on("close_step",Object(s["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.$emit("modelSaved");case 1:case"end":return e.stop()}},e)})));case 3:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),updated:function(){this.imgtosvg()},beforeDestroy:function(){f["EventBus"].$off("close_step")}},u=p,h=(a("143e"),a("2877")),_=Object(h["a"])(u,i,n,!1,null,null,null);t["default"]=_.exports},ad9f:function(e,t,a){var i=a("42f0");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("499e").default;n("e7542a32",i,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-639b25c0.37e4b60f.js.map