(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-658d03ba"],{"28d9":function(e,o,r){var t=r("4c6a");"string"===typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);var i=r("499e").default;i("05c43b27",t,!0,{sourceMap:!1,shadowMode:!1})},"4c6a":function(e,o,r){o=e.exports=r("2350")(!1),o.push([e.i,":root{--accent:#e1002d;--bg-color:#fff;--base-color:#202a3d;--darkAccent:#a2001e;--tableHead:#788699}.user-profile .block{display:-webkit-box;display:-ms-flexbox;display:flex}@media (max-width:992px){.user-profile .block{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}}.user-profile .top-buttons{padding-left:15px;margin-bottom:5rem}.user-profile .top-buttons .btn-green a,.user-profile .top-buttons .btn-grey a{color:#fff}.user-profile .col-md-4{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media (max-width:992px){.user-profile .col-md-4{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;width:100%;min-width:100%;max-width:100%;margin-bottom:3rem}}.user-profile .col-md-4 .user-photo{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-profile .col-md-4 .user-photo .photo-block{margin-top:2rem;border-radius:50%;width:20rem;height:20rem;max-height:20rem}@media (max-width:1249px){.user-profile .col-md-4 .user-photo .photo-block{height:20rem;width:20rem;max-height:20rem}}@media (max-width:992px){.user-profile .col-md-4 .user-photo .photo-block{width:17rem;height:17rem}}@media (max-width:540px){.user-profile .col-md-4 .user-photo .photo-block{max-height:15rem;max-width:15rem}}.user-profile .col-md-4 .user-photo .photo-block #profile-photo{height:100%;width:100%;background-size:cover;background-position:50%;border-radius:50%}.user-profile .col-md-4 .user-photo .photo-wrapper{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}@media (max-width:992px){.user-profile .col-md-4 .user-photo .photo-wrapper{padding-left:3rem}}.user-profile .col-md-4 .user-photo .photo-wrapper .user-name{margin-top:3.5rem;color:#7c8ca5;font-size:1.8rem}.user-profile .col-md-4 .user-photo .photo-wrapper .photo-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;margin-top:3rem}.user-profile .col-md-4 .user-photo .photo-wrapper .photo-buttons button,.user-profile .col-md-4 .user-photo .photo-wrapper .photo-buttons label{max-height:3.5rem;font-size:1.5rem;padding:.5rem 2rem}@media (max-width:450px){.user-profile .col-md-4 .user-photo .photo-wrapper .photo-buttons button,.user-profile .col-md-4 .user-photo .photo-wrapper .photo-buttons label{width:100%!important}}.user-profile .col-md-12{max-width:100%}.user-profile .profile-card{padding-top:3.5rem;background-color:#fff;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.user-profile .profile-card .col-md-3{min-width:100%;max-width:100%;max-height:9rem}.user-profile .profile-card .col-md-small{min-width:50%;max-width:50%;padding-left:15px;padding-right:15px;position:relative;min-height:1px}.user-profile .profile-card .field-box{margin-bottom:3rem}.user-profile .profile-card .field-box label{color:#202a3d;font-size:1.4rem;display:-webkit-box;display:-ms-flexbox;display:flex;font-weight:600;text-transform:capitalize;padding-left:.3rem}.user-profile .profile-card .field-box input{background-color:#fff;padding-left:2rem;font-size:1.5rem;padding-right:1.5rem}.user-profile .profile-card .field-box input,.user-profile .profile-card .field-box select{width:100%;height:3.5rem;border-radius:4px;border:1px solid #ced0da;margin-top:1.3rem}.user-profile .profile-card .field-box .contractor_checkbox,.user-profile .profile-card .field-box .contractor_parag{height:3.5rem;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.user-profile .profile-card .field-box .contractor_parag{margin-top:1.2rem;padding-left:2rem}.user-profile .profile-card .field-box .contractor_parag input{border:none}.user-profile .profile-card .field-box .contractor_parag p{margin-bottom:0}.user-profile .profile-card .field-box .label-green{color:var(--accent);font-size:1.7rem;font-weight:400}.user-profile .profile-card .field-box button{padding:0}.user-profile .profile-card .fields{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.user-profile .profile-card .left-block,.user-profile .profile-card .middle-block,.user-profile .profile-card .right-block{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;width:33.3%;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%}@media (max-width:992px){.user-profile .profile-card .left-block{width:100%;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap}.user-profile .profile-card .left-block .col-md-3{max-width:100%;min-width:100%}.user-profile .profile-card .left-block .first-line{min-width:100%!important}.user-profile .profile-card .left-block .dark{padding:1rem}}@media (max-width:767px){.user-profile .profile-card .left-block .col-md-3{min-width:100%}.user-profile .profile-card .left-block .dark{margin-top:0}}@media (max-width:992px){.user-profile .profile-card .middle-block,.user-profile .profile-card .right-block{width:50%}}@media (max-width:767px){.user-profile .profile-card .middle-block,.user-profile .profile-card .right-block{width:100%}}.user-profile .profile-card .first-line{max-height:4rem;min-width:100%!important}.user-profile .profile-card .btn-dark{margin-top:1.3rem;margin-bottom:0;height:3.5rem;font-size:1.5rem;line-height:1.4rem;width:100%}.user-profile .profile-card .card-buttons{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;margin-bottom:6rem;margin-top:2rem}.user-profile .profile-card .card-buttons .card-buttons-list{margin-right:25px}@media (max-width:1249px){.user-profile .profile-card .card-buttons .card-buttons-list{margin-right:20px}}.user-profile .profile-card .card-buttons .card-buttons-list .btn:last-child{margin-right:0}@media (max-width:767px){.user-profile .profile-card .card-buttons{margin-right:0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.user-profile .profile-card .card-buttons .card-buttons-list{-ms-flex-wrap:wrap;flex-wrap:wrap;padding:0 15px;margin-top:2rem}.user-profile .profile-card .card-buttons .card-buttons-list:last-child{margin-right:0}.user-profile .profile-card .card-buttons .card-buttons-list .btn{width:100%;margin-right:0;margin-bottom:.8rem}}.user-profile .profile-card .card-buttons .contractor_checkbox{margin-right:auto;padding-left:1.5rem;font-size:1.5rem;font-weight:400!important}.user-profile .left-zone,.user-profile .right-zone{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;height:100%;min-width:50%;max-width:50%}@media (max-width:1249px){.user-profile .left-zone,.user-profile .right-zone{max-width:50%}}@media (max-width:992px){.user-profile .left-zone,.user-profile .right-zone{max-width:100%}}@media (max-width:767px){.user-profile .left-zone,.user-profile .right-zone{min-width:100%}.user-profile .left-zone .col-md-4,.user-profile .right-zone .col-md-4{min-width:100%!important}}.user-profile .left-zone .col-md-16,.user-profile .right-zone .col-md-16{max-width:100%;min-width:100%}@media (min-wid768 992px){.user-profile .left-zone .col-md-16,.user-profile .right-zone .col-md-16{-webkit-box-ordinal-group:unset!important;-ms-flex-order:unset!important;order:unset!important}}.user-profile .left-zone .col-md-12,.user-profile .right-zone .col-md-12{min-width:75%;max-width:75%}@media (min-width:768px){.user-profile .left-zone .col-md-12,.user-profile .right-zone .col-md-12{-webkit-box-ordinal-group:unset!important;-ms-flex-order:unset!important;order:unset!important}}.user-profile .left-zone .col-md-8,.user-profile .right-zone .col-md-8{max-width:50%;min-width:50%}@media (min-width:768px){.user-profile .left-zone .col-md-8,.user-profile .right-zone .col-md-8{-webkit-box-ordinal-group:unset!important;-ms-flex-order:unset!important;order:unset!important}}@media (max-width:992px){.user-profile .left-zone .col-md-8,.user-profile .right-zone .col-md-8{max-width:50%;min-width:50%}}@media (max-width:767px){.user-profile .left-zone .col-md-8,.user-profile .right-zone .col-md-8{max-width:100%;min-width:100%}}.user-profile .left-zone .col-md-4,.user-profile .right-zone .col-md-4{max-width:25%;min-width:25%}@media (min-width:768px){.user-profile .left-zone .col-md-4,.user-profile .right-zone .col-md-4{-webkit-box-ordinal-group:unset!important;-ms-flex-order:unset!important;order:unset!important}}@media (max-width:992px){.user-profile .left-zone .col-md-4,.user-profile .right-zone .col-md-4{max-width:50%;min-width:50%}}@media (max-width:767px){.user-profile .left-zone .col-md-4,.user-profile .right-zone .col-md-4{max-width:100%;min-width:100%}}.user-profile .left-zone .col10,.user-profile .left-zone .col20,.user-profile .left-zone .col30,.user-profile .left-zone .col33,.user-profile .left-zone .col40,.user-profile .left-zone .col60,.user-profile .left-zone .col70,.user-profile .left-zone .col80,.user-profile .left-zone .col90,.user-profile .right-zone .col10,.user-profile .right-zone .col20,.user-profile .right-zone .col30,.user-profile .right-zone .col33,.user-profile .right-zone .col40,.user-profile .right-zone .col60,.user-profile .right-zone .col70,.user-profile .right-zone .col80,.user-profile .right-zone .col90{max-width:10%;min-width:10%;padding-left:15px;padding-right:15px}@media (min-width:768px){.user-profile .left-zone .col10,.user-profile .left-zone .col20,.user-profile .left-zone .col30,.user-profile .left-zone .col33,.user-profile .left-zone .col40,.user-profile .left-zone .col60,.user-profile .left-zone .col70,.user-profile .left-zone .col80,.user-profile .left-zone .col90,.user-profile .right-zone .col10,.user-profile .right-zone .col20,.user-profile .right-zone .col30,.user-profile .right-zone .col33,.user-profile .right-zone .col40,.user-profile .right-zone .col60,.user-profile .right-zone .col70,.user-profile .right-zone .col80,.user-profile .right-zone .col90{-webkit-box-ordinal-group:unset!important;-ms-flex-order:unset!important;order:unset!important}}@media (max-width:767px){.user-profile .left-zone .col10,.user-profile .left-zone .col20,.user-profile .left-zone .col30,.user-profile .left-zone .col33,.user-profile .left-zone .col40,.user-profile .left-zone .col60,.user-profile .left-zone .col70,.user-profile .left-zone .col80,.user-profile .left-zone .col90,.user-profile .right-zone .col10,.user-profile .right-zone .col20,.user-profile .right-zone .col30,.user-profile .right-zone .col33,.user-profile .right-zone .col40,.user-profile .right-zone .col60,.user-profile .right-zone .col70,.user-profile .right-zone .col80,.user-profile .right-zone .col90{max-width:100%!important;min-width:100%!important}}.user-profile .left-zone .col20,.user-profile .right-zone .col20{max-width:20%;min-width:20%}.user-profile .left-zone .col30,.user-profile .right-zone .col30{max-width:30%;min-width:30%}.user-profile .left-zone .col33,.user-profile .right-zone .col33{max-width:33.3%;min-width:33.3%}.user-profile .left-zone .col40,.user-profile .right-zone .col40{max-width:40%;min-width:40%}.user-profile .left-zone .col60,.user-profile .right-zone .col60{min-width:60%;max-width:60%}.user-profile .left-zone .col70,.user-profile .right-zone .col70{min-width:70%;max-width:70%}.user-profile .left-zone .col80,.user-profile .right-zone .col80{min-width:80%;max-width:80%}.user-profile .left-zone .col90,.user-profile .right-zone .col90{min-width:90%;max-width:90%}.user-profile .vdp-datepicker__calendar{top:-27rem;height:28rem}.user-profile .border-right{border-right:1px solid #ced0da}.user-profile .full-width{width:100%;max-width:100%}@media (max-width:767px){.user-profile .hidden{display:none!important}}.user-profile .photo-left-col{min-width:33%;max-width:33%}@media (max-width:767px){.user-profile .photo-left-col{min-width:100%;max-width:100%}}.user-profile .photo-left-col>div{min-width:100%!important;max-width:100%!important}.user-profile .photo-right-col{min-width:33%;max-width:33%}@media (max-width:767px){.user-profile .photo-right-col{min-width:100%;max-width:100%}}.user-profile .vv-error{font-size:1.3rem;color:#7c8ca5;padding-left:2rem;position:absolute;margin-top:.2727272727rem}.user-profile .zone{height:100%}",""])},"66aa":function(e,o,r){"use strict";r.r(o);var t=function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{staticClass:"user-profile"},[r("div",{staticClass:"container no-padding"},[e.links.length>0?r("div",{staticClass:"top-buttons"},e._l(e.links,function(o){return r("button",{class:o.class},[r("router-link",{attrs:{to:o.link_url}},[e._v(e._s(o.link_title))])],1)}),0):e._e(),e._l(e.tabs,function(o){return r("div",{staticClass:"tab"},e._l(o.blocks,function(o,t){return r("div",{staticClass:"block"},[e.photo_block?r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"user-photo"},[e._m(0,!0),r("div",{staticClass:"photo-wrapper"},[r("p",{staticClass:"user-name"},[e.models.Consumers[0].first_name?r("span",[e._v(e._s(e.models.Consumers[0].first_name)+" ")]):e._e(),e.models.Consumers[0].last_name?r("span",[e._v(" "+e._s(e.models.Consumers[0].last_name))]):e._e()]),r("div",{staticClass:"photo-buttons"},[r("label",{staticClass:"btn btn-green",attrs:{for:"photo-load"}},[e._v("\n                                    Загрузить\n                                    "),r("input",{staticStyle:{display:"none"},attrs:{id:"photo-load",type:"file"},on:{change:e.photoLoad}})]),r("button",{staticClass:"btn btn-dark ",on:{click:e.deletePhoto}},[e._v("Удалить")])])])])]):e._e(),r("div",{class:{"col-md-12":e.photo_block,"col-md-16":!e.photo_block,"no-padding":!0}},[r("div",{staticClass:"profile-card"},[r("div",{staticClass:"fields"},[r("Zone",{class:{"full-width":0===e.fields.filter(function(e){return"2"===e.zone}).length,grid:e.form_parameters.use_grid_layout},attrs:{models:e.models,fields:e.fields.filter(function(e){return"1"===e.zone}),add_models:e.add_data_models}}),e.fields.filter(function(e){return"2"===e.zone}).length>0?r("Zone",{class:{grid:e.form_parameters.use_grid_layout},attrs:{models:e.models,fields:e.fields.filter(function(e){return"2"===e.zone}),add_models:e.add_data_models}}):e._e()],1),r("div",{staticClass:"card-buttons"},[r("div",{staticClass:"card-buttons-list"},e._l(e.sets.profile_card_actions,function(o){return r("a",{class:o.class,attrs:{name:o.code},on:{click:function(r){return e.sendProfile(o)}}},[e._v(e._s(o.title))])}),0)])])])])}),0)})],2)])},i=[function(){var e=this,o=e.$createElement,r=e._self._c||o;return r("div",{staticClass:"photo-block"},[r("div",{attrs:{id:"profile-photo"}})])}],l=(r("28a5"),r("7f7f"),r("b54a"),r("96cf"),r("3b8d")),a=r("75fc"),s=(r("ac6a"),r("2430")),n=(r("bc3a"),r("fa33")),d=r("56d7"),p=r("c777"),f={data:function(){return{modelObj:{},tabs:[],models:{},add_data_models:{},actions:[],form_parameters:{},sets:{},links:[],actual:"",datapicker_translations:{en:s["a"],ru:s["b"]},photo_block:null,photo_path:"",fields:[]}},methods:{fillComponent:function(){var e=this;this.$http.post(this.$bRoute.meta.route).then(function(o){e.tabs=o.data.tabs,e.models=o.data.main_data_models,e.add_data_models=o.data.add_data_models,e.actions=o.data.actions.actions_card,e.links=o.data.links,e.form_parameters=o.data.form_parameters,e.sets=o.data.sets,e.photo_block=o.data.form_parameters.photo_block,e.photo=o.data.main_data_models.Consumers[0].photo,e.fields=[],e.tabs[0].blocks.forEach(function(o){e.fields=[].concat(Object(a["a"])(e.fields),Object(a["a"])(o.block_fields))}),e.$nextTick(function(){var o=document.querySelector("#profile-photo");o&&(o.style.backgroundImage=e.photo?"url("+e.photo+")":"url(/img/user_default.png)")})}).catch(function(o){e.$store.dispatch("showToast",{template:"error",title:o.response.status,message:o.response.data.message,position:o.response.data.position})})},test:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$parent.$refs.dmodal.showmodal(o);case 2:e.sent;case 3:case"end":return e.stop()}},e,this)}));function o(o){return e.apply(this,arguments)}return o}(),confirm:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(o){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return{modal:{confirm:!0,html:"<h1> Внимание </h1> <p>Спасибо за внимание</p>",actionOk:{title:"агась"}}},e.next=3,this.$parent.$refs.dmodal.confirmmodal(o);case 3:e.sent;case 4:case"end":return e.stop()}},e,this)}));function o(o){return e.apply(this,arguments)}return o}(),sendProfile:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(o){var r,t,i,l,a,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(r=o.code,t=o.link,"back"!==r){e.next=4;break}return this.$bRouter.go(-1),e.abrupt("return");case 4:return i=this.form_parameters.form_base_data_model,l={main_data_models:this.models,form_parameters:{form_base_data_model:i}},e.prev=6,e.next=9,this.$validator.validateAll();case 9:if(a=e.sent,a){e.next=14;break}for(s in this.fieldsVV)this.fieldsVV[s].touched=!0;return this.$toast.error("Некорректные данные","",{position:"topRight"}),e.abrupt("return");case 14:return e.next=16,this.$http.post(t,l);case 16:return n=e.sent,e.next=19,this.$store.dispatch("showToast",{template:n.data.template,title:n.data.title,message:n.data.message,position:n.data.position});case 19:if(!n.data.requery||"ok"===r){e.next=22;break}return e.next=22,this.fillComponent();case 22:"ok"===r&&this.$bRouter.go(-1),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](6),this.$store.dispatch("showToast",{template:"error",title:e.t0.response.status,message:e.t0.response.data.message,position:e.t0.response.data.position});case 28:case"end":return e.stop()}},e,this,[[6,25]])}));function o(o){return e.apply(this,arguments)}return o}(),photoLoad:function(e){var o=this,r=document.querySelector("#profile-photo"),t=new FileReader;t.readAsDataURL(e.target.files[0]);var i=e.target.files[0].name;i=i.slice(0,i.lastIndexOf("."));var l={id:null,storedFile:{size:e.target.files[0].size,name:i,extension:e.target.files[0].name.slice(e.target.files[0].name.lastIndexOf(".")+1)},stored_file_id:null};t.onload=function(e){r.style.backgroundImage="url("+e.target.result+")",d["EventBus"].$emit("userPhotoChanged",{src:"url("+e.target.result+")"});var t=e.target.result.split(",");l.storedFile["mime"]=t[1],l.storedFile["mime_type"]=t[0],o.models[o.form_parameters.form_base_data_model][0].stored_file=l}},deletePhoto:function(){var e=document.querySelector("#profile-photo"),o=document.querySelector("#photo-load");e.style.backgroundImage="url(/img/user_default.png)",this.models[this.form_parameters.form_base_data_model][0].photo="",o.value="",this.models[this.form_parameters.form_base_data_model][0].stored_file_id=null,d["EventBus"].$emit("userPhotoChanged",{src:"url(/img/user_default.png)"})}},mounted:function(){var e=this;d["EventBus"].$on("triggerModelUpdate",function(o){e.fillComponent()});this.$bRouter.path,"en"==this.$store.getters.getLang&&(this.actual="Actual"),"ru"==this.$store.getters.getLang&&(this.actual="Актуальность"),this.fillComponent()},components:{Datepicker:n["a"],Zone:p["a"]}},c=f,m=(r("b3d7"),r("2877")),u=Object(m["a"])(c,t,i,!1,null,null,null);o["default"]=u.exports},b3d7:function(e,o,r){"use strict";var t=r("28d9"),i=r.n(t);i.a}}]);
//# sourceMappingURL=chunk-658d03ba.4095d0f8.js.map